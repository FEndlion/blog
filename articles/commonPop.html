<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何解决弹窗过多，导致的html结构臃肿问题 | 前端名狮</title>
    <meta name="description" content="欢迎关注我的公众号【前端名狮】">
    <link rel="icon" href="/blog/logo.jpg">
    
    <link rel="preload" href="/blog/assets/css/0.styles.429037e2.css" as="style"><link rel="preload" href="/blog/assets/js/app.290bc687.js" as="script"><link rel="preload" href="/blog/assets/js/2.57d79db3.js" as="script"><link rel="preload" href="/blog/assets/js/6.91f7d16a.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.13d03df4.js"><link rel="prefetch" href="/blog/assets/js/11.be41fc50.js"><link rel="prefetch" href="/blog/assets/js/12.ebfdaaa2.js"><link rel="prefetch" href="/blog/assets/js/13.dd5aa02b.js"><link rel="prefetch" href="/blog/assets/js/14.d2ede202.js"><link rel="prefetch" href="/blog/assets/js/15.6aa5f82f.js"><link rel="prefetch" href="/blog/assets/js/16.55209552.js"><link rel="prefetch" href="/blog/assets/js/17.93b79b10.js"><link rel="prefetch" href="/blog/assets/js/18.4811d530.js"><link rel="prefetch" href="/blog/assets/js/19.17b8aa5a.js"><link rel="prefetch" href="/blog/assets/js/20.cab35723.js"><link rel="prefetch" href="/blog/assets/js/21.64633b4e.js"><link rel="prefetch" href="/blog/assets/js/22.1e687b07.js"><link rel="prefetch" href="/blog/assets/js/23.575b31ee.js"><link rel="prefetch" href="/blog/assets/js/24.6b4dba57.js"><link rel="prefetch" href="/blog/assets/js/25.a7b3d390.js"><link rel="prefetch" href="/blog/assets/js/26.b996ce49.js"><link rel="prefetch" href="/blog/assets/js/27.eb4d1b3f.js"><link rel="prefetch" href="/blog/assets/js/3.997a4712.js"><link rel="prefetch" href="/blog/assets/js/4.0745eacd.js"><link rel="prefetch" href="/blog/assets/js/5.a78c4459.js"><link rel="prefetch" href="/blog/assets/js/7.db749ca7.js"><link rel="prefetch" href="/blog/assets/js/8.2fba09bd.js"><link rel="prefetch" href="/blog/assets/js/9.06c824da.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.429037e2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端名狮</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/articles/" class="nav-link router-link-active">精选文章</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">试题精讲</a></div><div class="nav-item"><a href="/blog/heaven/" class="nav-link">学习园地</a></div> <a href="https://github.com/fe-toplion/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/articles/" class="nav-link router-link-active">精选文章</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">试题精讲</a></div><div class="nav-item"><a href="/blog/heaven/" class="nav-link">学习园地</a></div> <a href="https://github.com/fe-toplion/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>原创文章</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/articles/activityPlatform.html" class="sidebar-link">抛弃jenkins，如何用node从零搭建自动化部署管理平台</a></li><li><a href="/blog/articles/commonPop.html" class="active sidebar-link">如何解决弹窗过多，导致的html结构臃肿问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/articles/time.html" class="sidebar-link">支持跨时区、兼容本地时间不准且不依赖后端接口的倒计时</a></li><li><a href="/blog/articles/IntersectionObserver.html" class="sidebar-link">交叉观察器</a></li><li><a href="/blog/articles/browser.html" class="sidebar-link">node实例推导浏览器的渲染机制</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="如何解决弹窗过多，导致的html结构臃肿问题"><a href="#如何解决弹窗过多，导致的html结构臃肿问题" aria-hidden="true" class="header-anchor">#</a> 如何解决弹窗过多，导致的html结构臃肿问题</h1> <h3 id="业务背景"><a href="#业务背景" aria-hidden="true" class="header-anchor">#</a> 业务背景</h3> <p>弹窗是页面交互中的重要组成部分，前端开发的同学应该经常与它打交道。小编的日常是做面向C端的H5活动页面，弹窗处理是每天都要面对的情况。根据日常工作中的场景，我总结了弹窗有以下特点：</p> <ol><li>不同的活动页面，弹窗样式基本不同；</li> <li>不同的CSS开发者，弹窗的html结构不尽相同；</li> <li>同一个活动页面中的弹窗样式基本相同，但弹窗文案、按钮文案、按钮交互都不尽相同；</li></ol> <p>第一点和第二点导致我们无法抽离出适用于所有页面的弹窗组件，只能根据每次的活动页进行定制化。</p> <p>第三点是我们这篇文章重点分析的情况，最常规的做法就是每个弹窗拥有独立的html结构和添加对应的事件处理逻辑。</p> <p><strong>这样固然能解决问题，但是当页面逻辑复杂、弹窗特别多的情况下，你会发现html中存在大量的弹窗dom结构，不仅影响代码美观，也增加了html文件大小和渲染解析时间。最不能忍的是，每处理一种情况，都要去增加对应的弹窗，工作相当繁琐。</strong></p> <p>比如以下弹窗：</p> <p><img src="/blog/assets/img/11.8ae752a1.png" alt="image"></p> <p><img src="/blog/assets/img/12.8ed8b3c0.png" alt="image"></p> <p><img src="/blog/assets/img/13.40805b0d.png" alt="image"></p> <p><img src="/blog/assets/img/14.9ec633dc.png" alt="image"></p> <p><strong>这些还只是一类逻辑出现的弹窗，如果页面逻辑复杂，可能会出现几十个这种弹窗。上面的弹窗样式基本相同，不同的就是文案、按钮处理逻辑等，怎么抽离他们呢？</strong></p> <p><img src="/blog/assets/img/15.48175332.jpg" alt="image"></p> <h3 id="抽离方案"><a href="#抽离方案" aria-hidden="true" class="header-anchor">#</a> 抽离方案</h3> <p><strong>1. ES6 + Zepto 原生撸</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> commonPop <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">init</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> popHtml <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;m-popup-inner dn&quot; id=&quot;commonPop&quot;&gt;
            &lt;div class=&quot;popup-info&quot;&gt;
                &lt;div class=&quot;title&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;
                &lt;div class=&quot;c-des-info&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token punctuation">.</span>desc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;popup-btn&quot;&gt;
                &lt;a href=&quot;javascript:;&quot; class=&quot;c-btn-link dn leftBtn&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token punctuation">.</span>leftBtnTxt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a&gt;
                &lt;a href=&quot;javascript:;&quot; class=&quot;c-btn-link dn rightBtn&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token punctuation">.</span>rightBtnTxt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
        
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>popHtml<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>param<span class="token punctuation">.</span>leftBtnTxt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#commonPop .leftBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'dn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 避免按钮不存在的情况</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#commonPop .leftBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                param<span class="token punctuation">.</span>leftCallback <span class="token operator">&amp;&amp;</span> param<span class="token punctuation">.</span><span class="token function">leftCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#commonPop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 销毁弹窗</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">if</span><span class="token punctuation">(</span>param<span class="token punctuation">.</span>rightBtnTxt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#commonPop .rightBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'dn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 避免按钮不存在的情况</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#commonPop .rightBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                param<span class="token punctuation">.</span>rightCallback <span class="token operator">&amp;&amp;</span> param<span class="token punctuation">.</span><span class="token function">rightCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#commonPop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 销毁弹窗</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#commonPop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'dn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> commonPop<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><strong>调用时只需要传对应参数就行，比如：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> commonPop <span class="token keyword">from</span> <span class="token string">'./commonPop'</span><span class="token punctuation">;</span>

<span class="token comment">// 第一个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'开通成功'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'已为你开通25天会员'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'我知道了'</span>
<span class="token punctuation">}</span>
commonPop<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第二个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'账号提示'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'请您确认两方的账号绑定手机号一致后点击领取'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'换绑手机号'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">leftCallback</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">goChangePhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rightBtnTxt<span class="token punctuation">:</span> <span class="token string">'关闭'</span>
<span class="token punctuation">}</span>
commonPop<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第三个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'注册提示'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'完成注册即可激活权益'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
    rightBtnTxt<span class="token punctuation">:</span> <span class="token string">'前往注册'</span>
    <span class="token function-variable function">rightCallback</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">goRegister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span>
commonPop<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第四个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'实名认证提示'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'你需要实名认证后才可激活权益'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
    rightBtnTxt<span class="token punctuation">:</span> <span class="token string">'前往认证'</span>
    rightCallback<span class="token punctuation">:</span> <span class="token function">goRealName</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>   
<span class="token punctuation">}</span>
commonPop<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p><strong>2. VUE版本</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// commonPop.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;show&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;cover&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;m-popup&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;pop-info&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;c-tit&quot;</span> v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>               
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;c-text&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>desc<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;pop-btn&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;c-btn-link&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;leftBtnTxt&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;leftCallback&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>leftBtnTxt<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;c-btn-link highlight&quot;</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;rightBtnTxt&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;rightCallback&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>rightBtnTxt<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> popUpComponent <span class="token keyword">from</span> <span class="token string">'./commonPop.vue'</span>


<span class="token comment">// 返回一个 扩展实例构造器</span>
<span class="token keyword">const</span> PopUpConstructor <span class="token operator">=</span> vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>popUpComponent<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">showPopUp</span><span class="token punctuation">(</span><span class="token parameter">popData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实例化一个 commonPop.vue</span>
    <span class="token keyword">const</span> popUpDom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopUpConstructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                title<span class="token punctuation">:</span> popData<span class="token punctuation">.</span>title<span class="token punctuation">,</span>               
                descFirst<span class="token punctuation">:</span> popData<span class="token punctuation">.</span>descFirst<span class="token punctuation">,</span>               
                leftBtnText<span class="token punctuation">:</span> popData<span class="token punctuation">.</span>leftBtnText<span class="token punctuation">,</span>
                rightBtnText<span class="token punctuation">:</span> popData<span class="token punctuation">.</span>rightBtnText<span class="token punctuation">,</span>
                show<span class="token punctuation">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">leftCallback</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                popData<span class="token punctuation">.</span>leftCallback <span class="token operator">&amp;&amp;</span> popData<span class="token punctuation">.</span><span class="token function">leftCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
             <span class="token function-variable function">rightCallback</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                popData<span class="token punctuation">.</span>rightCallback <span class="token operator">&amp;&amp;</span> popData<span class="token punctuation">.</span><span class="token function">rightCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 把 实例化的 popUp.vue 添加到 body 里</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>popUpDom<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
    <span class="token keyword">return</span> popUpDom<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注册为全局组件的函数</span>
<span class="token keyword">function</span> <span class="token function">registryPopUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将组件注册到 vue 的 原型链里去,</span>
    <span class="token comment">// 这样就可以在所有 vue 的实例里面使用 this.$popUp()</span>
    vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$popUp <span class="token operator">=</span> showPopUp
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> registryPopUp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p><strong>调用时只需要传对应参数就行，比如：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 第一个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'开通成功'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'已为你开通25天会员'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'我知道了'</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$popUp</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第二个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'账号提示'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'请您确认两方的账号绑定手机号一致后点击领取'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'换绑手机号'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">leftCallback</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">goChangePhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rightBtnTxt<span class="token punctuation">:</span> <span class="token string">'关闭'</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$popUp</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第三个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'注册提示'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'完成注册即可激活权益'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
    rightBtnTxt<span class="token punctuation">:</span> <span class="token string">'前往注册'</span>
    <span class="token function-variable function">rightCallback</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">goRegister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$popUp</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第四个弹窗</span>
<span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'实名认证提示'</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">'你需要实名认证后才可激活权益'</span><span class="token punctuation">,</span>
    leftBtnTxt<span class="token punctuation">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>
    rightBtnTxt<span class="token punctuation">:</span> <span class="token string">'前往认证'</span>
    rightCallback<span class="token punctuation">:</span> <span class="token function">goRealName</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>   
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$popUp</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h3> <p>两种方案的原理基本一样，都是在触发弹窗展示后，动态的添加dom结构到html中，点击弹窗按钮执行逻辑后，删除对应的dom结构，这样就避免了html页面中出现过多弹窗dom造成的页面臃肿问题。</p> <p>优化点无大小，只要能够提高页面性能、有利于维护代码、减少重复劳动力、提高工作效率，都可以在日常的工作中进行优化整理。</p> <hr> <p><strong>扫一扫 关注我的公众号【前端名狮】，更多精彩内容陪伴你！</strong></p> <p><img src="/blog/assets/img/7.3e56d765.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fe-toplion/blog/edit/master/docs/articles/commonPop.md" target="_blank" rel="noopener noreferrer">本文源码地址</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">12/16/2019, 9:09:17 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/articles/activityPlatform.html" class="prev">抛弃jenkins，如何用node从零搭建自动化部署管理平台</a></span> <span class="next"><a href="/blog/articles/time.html">支持跨时区、兼容本地时间不准且不依赖后端接口的倒计时</a>→
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.290bc687.js" defer></script><script src="/blog/assets/js/2.57d79db3.js" defer></script><script src="/blog/assets/js/6.91f7d16a.js" defer></script>
  </body>
</html>
